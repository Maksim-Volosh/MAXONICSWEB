{% extends "main/base.html" %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock title %}

{% block main %}


<section class="profile">
    <div class="profile__container">
        {% if user.is_staff %}
            <div class="profile__title"><a href="{% url 'admin:index' %}">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a><br><br></div>

        {% endif %}


        <div class="profile__title">–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:</div>
        <div class="profile__info">
            <div class="profile__username">
                <div class="username__cap">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: </div>
                <div class="username__username">{{ user.username|capfirst }}</div>
            </div>
            <div class="profile__email">
                <div class="email__cap">–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã: </div>
                <div class="email__email">{{ user.email|capfirst }}</div>
            </div>
            <div class="profile__name">
                <div class="name__cap">–ò–º—è: </div>
                <div class="name__name">{{ user.first_name|capfirst }}</div>
            </div>
            <div class="profile__lastname">
                <div class="lastname__cap">–§–∞–º–∏–ª–∏—è: </div>
                <div class="lastname__lastname">{{ user.last_name|capfirst }}</div>
            </div>

        </div>
            {% if success_message %}
            <div class="opacity" id="myModal">
                <div class="modal-form animate__animated animate__delay-1s animate__fadeInUp animate__fadeIn">
                    <div class="modal-content">
                        <div class="modal-title">üöÄüéâ–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú üöÄüéâ</div>
                        <div class="modal-text">–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω, –∏ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤ —Å–∫–æ—Ä–µ–π—à–µ–µ –≤—Ä–µ–º—è, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –∑–∞–∫–∞–∑–∞</div>
                    </div>
                    <div class="modal-button"><button id="closeModalBtn">–ü–æ–Ω—è–ª</button></div>
                </div>
            </div>
            {% endif %}

        <div class="orders__title">–ó–∞–∫–∞–∑—ã:</div>
        <div class="profile__orders">
            {% if orders %}
                {% for order in orders %}
                    <div class="orders__box">
                        <div class="orders__order">
                            <div class="order__name">
                                <div class="name__cap">–ó–∞–∫–∞–∑:</div>
                                <div class="name__name">{{ order.name }}</div>
                            </div>
                            <div class="order__description">
                                <div class="description__cap">–û–ø–∏—Å–∞–Ω–∏–µ:</div>
                                <div class="description__description">{{ order.description|safe|linebreaks }}</div>
                            </div>
                            <div class="order__targetgroup">
                                <div class="targetgroup__cap">–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:</div>
                                <div class="targetgroup__targetgroup">{{ order.targetgroup }}</div>
                            </div>
                            <div class="order__websitetype">
                                <div class="websitetype__cap">–¢–∏–ø —Å–∞–π—Ç–∞:</div>
                                <div class="websitetype__websitetype">{{ order.get_websitetype_display }}</div>
                            </div>
                            <div class="order__budget">
                                <div class="budget__cap">–ë—é–¥–∂–µ—Ç:</div>
                                <div class="budget__budget">{{ order.budget }} <p> ‚Ç¨</p></div>
                            </div>
                            <div class="order__deadline">
                                <div class="deadline__cap">–ñ–µ–ª–∞–µ–º—ã–π —Å—Ä–æ–∫:</div>
                                <div class="deadline__deadline">{{ order.get_deadline_display }}</div>
                            </div>
                            <div class="order__deadline">
                                <div class="deadline__cap">–¢–∏–ø —Å–≤—è–∑–∏:</div>
                                <div class="deadline__deadline">{{ order.get_socialnetworkchose_display }}: {{ order.socialnetwork }}</div>
                            </div>
                            <div class="order__files">
                                <div class="files__cap">–§–∞–π–ª—ã:</div>
                                {% if order.files %}
                                <a href="{% url 'download_file' file_path=order.files.name %}" download>{{ order.files.name }}</a>
                                {% else %}
                                    <div class="files__files">–§–∞–π–ª—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã...</div>
                                {% endif %}
                            </div>
                            <div class="order__status">
                                <div class="status__cap">–°—Ç–∞—Ç—É—Å:</div>
                                <div class="status__status">{{ order.get_status_display }}</div>
                            </div>
                            {% if user.is_staff %}
                            <div class="order__status">
                                <div class="status__cap">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</div>
                                <div class="status__status">{{ order.user.username|capfirst }}</div>
                            </div>
                            <div class="order__delete-button">
                                <form method="post" action="{% url 'delete_order' order.id %}">
                                    {% csrf_token %}
                                    <button class="delete-button" type="submit">–£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑</button>
                                </form>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
            <div class="orders__box">
                <div class="orders__no-order">
                    <div class="no-order__title">–£ –≤–∞—Å –Ω–µ—Ç—É –∑–∞–∫–∞–∑–æ–≤ üò¢ ...</div>
                    <div class="no-order__button">
                        <div class="mbr-section-btn" >
                            <a class="button-order" href="{% url "how_to_order" %}">–ó–∞–∫–∞–∑–∞—Ç—å</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        var closeModalBtn = document.getElementById('closeModalBtn');
        
        // –ù–∞—Ö–æ–¥–∏–º —Å–∞–º–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        var modal = document.getElementById('myModal');
    
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É
        closeModalBtn.addEventListener('click', function () {
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.classList.add('hidden-modal');
        });
    });    
</script>

{% endblock main %}
</html>